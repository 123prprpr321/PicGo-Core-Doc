<!DOCTYPE html>
<html lang="简体中文">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>API 列表 | PicGo-Core</title>
    <meta name="generator" content="VuePress 1.9.7">
    <link rel="icon" href="https://pic.molunerfinn.com/picgo/docs/logo-150.png">
    <meta name="description" content="PicGo的核心组件">
    
    <link rel="preload" href="/PicGo-Core-Doc/assets/css/0.styles.b9fb17fb.css" as="style"><link rel="preload" href="/PicGo-Core-Doc/assets/js/app.7b024f77.js" as="script"><link rel="preload" href="/PicGo-Core-Doc/assets/js/2.ff97eeb7.js" as="script"><link rel="preload" href="/PicGo-Core-Doc/assets/js/9.252a3bf2.js" as="script"><link rel="preload" href="/PicGo-Core-Doc/assets/js/3.188656f0.js" as="script"><link rel="prefetch" href="/PicGo-Core-Doc/assets/js/10.c0b55ed1.js"><link rel="prefetch" href="/PicGo-Core-Doc/assets/js/11.327d8c3a.js"><link rel="prefetch" href="/PicGo-Core-Doc/assets/js/12.de33cbbf.js"><link rel="prefetch" href="/PicGo-Core-Doc/assets/js/13.a3c2a465.js"><link rel="prefetch" href="/PicGo-Core-Doc/assets/js/14.4a58a9f8.js"><link rel="prefetch" href="/PicGo-Core-Doc/assets/js/15.97d8821d.js"><link rel="prefetch" href="/PicGo-Core-Doc/assets/js/16.85a6cb6d.js"><link rel="prefetch" href="/PicGo-Core-Doc/assets/js/17.f697f618.js"><link rel="prefetch" href="/PicGo-Core-Doc/assets/js/4.171288c8.js"><link rel="prefetch" href="/PicGo-Core-Doc/assets/js/5.4b34ca54.js"><link rel="prefetch" href="/PicGo-Core-Doc/assets/js/6.31ea92d8.js"><link rel="prefetch" href="/PicGo-Core-Doc/assets/js/7.d5314c0e.js"><link rel="prefetch" href="/PicGo-Core-Doc/assets/js/8.a92f1d9c.js">
    <link rel="stylesheet" href="/PicGo-Core-Doc/assets/css/0.styles.b9fb17fb.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/PicGo-Core-Doc/" class="home-link router-link-active"><!----> <span class="site-name">PicGo-Core</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/PicGo-Core-Doc/zh/guide/" class="nav-link">
  指南
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="插件开发指南" class="dropdown-title"><span class="title">插件开发指南</span> <span class="arrow down"></span></button> <button type="button" aria-label="插件开发指南" class="mobile-dropdown-title"><span class="title">插件开发指南</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/PicGo-Core-Doc/zh/dev-guide/cli.html" class="nav-link">
  插件开发
</a></li><li class="dropdown-item"><!----> <a href="/PicGo-Core-Doc/zh/dev-guide/gui.html" class="nav-link">
  GUI插件开发
</a></li><li class="dropdown-item"><!----> <a href="/PicGo-Core-Doc/zh/dev-guide/deploy.html" class="nav-link">
  插件测试与发布
</a></li></ul></div></div><div class="nav-item"><a href="/PicGo-Core-Doc/zh/api/" aria-current="page" class="nav-link router-link-exact-active router-link-active">
  API列表
</a></div> <a href="https://github.com/PicGo/PicGo-Core" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/PicGo-Core-Doc/zh/guide/" class="nav-link">
  指南
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="插件开发指南" class="dropdown-title"><span class="title">插件开发指南</span> <span class="arrow down"></span></button> <button type="button" aria-label="插件开发指南" class="mobile-dropdown-title"><span class="title">插件开发指南</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/PicGo-Core-Doc/zh/dev-guide/cli.html" class="nav-link">
  插件开发
</a></li><li class="dropdown-item"><!----> <a href="/PicGo-Core-Doc/zh/dev-guide/gui.html" class="nav-link">
  GUI插件开发
</a></li><li class="dropdown-item"><!----> <a href="/PicGo-Core-Doc/zh/dev-guide/deploy.html" class="nav-link">
  插件测试与发布
</a></li></ul></div></div><div class="nav-item"><a href="/PicGo-Core-Doc/zh/api/" aria-current="page" class="nav-link router-link-exact-active router-link-active">
  API列表
</a></div> <a href="https://github.com/PicGo/PicGo-Core" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav>  <ul class="sidebar-links"><li><section class="sidebar-group depth-0"><p class="sidebar-heading open"><span>API 列表</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/PicGo-Core-Doc/zh/api/#ctx" class="sidebar-link">ctx</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/PicGo-Core-Doc/zh/api/#upload-input" class="sidebar-link">upload([input])</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/PicGo-Core-Doc/zh/api/#getconfig-name" class="sidebar-link">getConfig([name])</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/PicGo-Core-Doc/zh/api/#setconfig-config" class="sidebar-link">setConfig(config)</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/PicGo-Core-Doc/zh/api/#saveconfig-config" class="sidebar-link">saveConfig(config)</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/PicGo-Core-Doc/zh/api/#unsetconfig-key-propname" class="sidebar-link">unsetConfig(key, propName)</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/PicGo-Core-Doc/zh/api/#removeconfig-key-propname" class="sidebar-link">removeConfig(key, propName)</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/PicGo-Core-Doc/zh/api/#emit-event-message" class="sidebar-link">emit(event, [message])</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/PicGo-Core-Doc/zh/api/#on-event-callback" class="sidebar-link">on(event, [callback])</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/PicGo-Core-Doc/zh/api/#input" class="sidebar-link">input</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/PicGo-Core-Doc/zh/api/#output" class="sidebar-link">output</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/PicGo-Core-Doc/zh/api/#configpath" class="sidebar-link">configPath</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/PicGo-Core-Doc/zh/api/#basedir" class="sidebar-link">baseDir</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/PicGo-Core-Doc/zh/api/#version" class="sidebar-link">VERSION</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/PicGo-Core-Doc/zh/api/#gui-version" class="sidebar-link">GUI_VERSION</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/PicGo-Core-Doc/zh/api/#helper" class="sidebar-link">helper</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/PicGo-Core-Doc/zh/api/#helper-transformer" class="sidebar-link">helper.transformer</a></li><li class="sidebar-sub-header"><a href="/PicGo-Core-Doc/zh/api/#helper-uploader" class="sidebar-link">helper.uploader</a></li><li class="sidebar-sub-header"><a href="/PicGo-Core-Doc/zh/api/#helper-beforetransformplugins" class="sidebar-link">helper.beforeTransformPlugins</a></li><li class="sidebar-sub-header"><a href="/PicGo-Core-Doc/zh/api/#helper-beforeuploadplugins" class="sidebar-link">helper.beforeUploadPlugins</a></li><li class="sidebar-sub-header"><a href="/PicGo-Core-Doc/zh/api/#helper-afteruploadplugins" class="sidebar-link">helper.afterUploadPlugins</a></li></ul></li><li><a href="/PicGo-Core-Doc/zh/api/#request-request" class="sidebar-link">Request.request</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/PicGo-Core-Doc/zh/api/#request" class="sidebar-link">request</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/PicGo-Core-Doc/zh/api/#cmd" class="sidebar-link">cmd</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/PicGo-Core-Doc/zh/api/#cmd-program" class="sidebar-link">cmd.program</a></li><li class="sidebar-sub-header"><a href="/PicGo-Core-Doc/zh/api/#cmd-inquirer" class="sidebar-link">cmd.inquirer</a></li></ul></li><li><a href="/PicGo-Core-Doc/zh/api/#log" class="sidebar-link">log</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/PicGo-Core-Doc/zh/api/#log-info-message" class="sidebar-link">log.info(message)</a></li><li class="sidebar-sub-header"><a href="/PicGo-Core-Doc/zh/api/#log-warn-message" class="sidebar-link">log.warn(message)</a></li><li class="sidebar-sub-header"><a href="/PicGo-Core-Doc/zh/api/#log-success-message" class="sidebar-link">log.success(message)</a></li><li class="sidebar-sub-header"><a href="/PicGo-Core-Doc/zh/api/#log-error-message" class="sidebar-link">log.error(message)</a></li></ul></li><li><a href="/PicGo-Core-Doc/zh/api/#pluginhandler" class="sidebar-link">PluginHandler</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/PicGo-Core-Doc/zh/api/#pluginhandler-install-pluginname" class="sidebar-link">pluginHandler.install([...pluginName])</a></li><li class="sidebar-sub-header"><a href="/PicGo-Core-Doc/zh/api/#pluginhandler-uninstall-pluginname" class="sidebar-link">pluginHandler.uninstall([...pluginName])</a></li><li class="sidebar-sub-header"><a href="/PicGo-Core-Doc/zh/api/#pluginhandler-update-pluginname" class="sidebar-link">pluginHandler.update([...pluginName])</a></li></ul></li><li><a href="/PicGo-Core-Doc/zh/api/#pluginloader" class="sidebar-link">PluginLoader</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/PicGo-Core-Doc/zh/api/#pluginloader-registerplugin-pluginname-plugin" class="sidebar-link">pluginLoader.registerPlugin(pluginName, plugin)</a></li><li class="sidebar-sub-header"><a href="/PicGo-Core-Doc/zh/api/#pluginloader-unregisterplugin-pluginname" class="sidebar-link">pluginLoader.unregisterPlugin(pluginName)</a></li><li class="sidebar-sub-header"><a href="/PicGo-Core-Doc/zh/api/#pluginloader-getplugin-pluginname" class="sidebar-link">pluginLoader.getPlugin(pluginName)</a></li><li class="sidebar-sub-header"><a href="/PicGo-Core-Doc/zh/api/#pluginloader-hasplugin-pluginname" class="sidebar-link">pluginLoader.hasPlugin(pluginName)</a></li></ul></li><li><a href="/PicGo-Core-Doc/zh/api/#use" class="sidebar-link">use</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/PicGo-Core-Doc/zh/api/#i18n" class="sidebar-link">i18n</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/PicGo-Core-Doc/zh/api/#i18n-addlocale-language-string-locales-ilocale" class="sidebar-link">i18n.addLocale(language: string, locales: ILocale)</a></li><li class="sidebar-sub-header"><a href="/PicGo-Core-Doc/zh/api/#i18n-translate-key-t-args-string" class="sidebar-link">i18n.translate(key: T, args?: {}) =&gt; string)</a></li><li class="sidebar-sub-header"><a href="/PicGo-Core-Doc/zh/api/#i18n-setlanguage-language-string" class="sidebar-link">i18n.setLanguage(language: string)</a></li><li class="sidebar-sub-header"><a href="/PicGo-Core-Doc/zh/api/#i18n-addlanguage-language-string-locales-ilocale" class="sidebar-link">i18n.addLanguage(language: string, locales: ILocale)</a></li><li class="sidebar-sub-header"><a href="/PicGo-Core-Doc/zh/api/#i18n-getlanguagelist" class="sidebar-link">i18n.getLanguageList()</a></li></ul></li><li><a href="/PicGo-Core-Doc/zh/api/#guiapi" class="sidebar-link">guiApi</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/PicGo-Core-Doc/zh/api/#guiapi-showinputbox-option" class="sidebar-link">guiApi.showInputBox([option])</a></li><li class="sidebar-sub-header"><a href="/PicGo-Core-Doc/zh/api/#guiapi-showfileexplorer-option" class="sidebar-link">guiApi.showFileExplorer([option])</a></li><li class="sidebar-sub-header"><a href="/PicGo-Core-Doc/zh/api/#guiapi-upload-file" class="sidebar-link">guiApi.upload([file])</a></li><li class="sidebar-sub-header"><a href="/PicGo-Core-Doc/zh/api/#guiapi-shownotification-option" class="sidebar-link">guiApi.showNotification(option)</a></li><li class="sidebar-sub-header"><a href="/PicGo-Core-Doc/zh/api/#guiapi-showmessagebox-option" class="sidebar-link">guiApi.showMessageBox([option])</a></li><li class="sidebar-sub-header"><a href="/PicGo-Core-Doc/zh/api/#guiapi-gallerydb" class="sidebar-link">guiApi.galleryDB</a></li></ul></li></ul></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="api-列表"><a href="#api-列表" aria-hidden="true" class="header-anchor">#</a> API 列表</h1> <p>picgo 本身是一个流程系统应用。除了最关键的上传之外，picgo 还支持配置、log 输出、插件、命令行交互等等功能。</p> <h2 id="ctx"><a href="#ctx" aria-hidden="true" class="header-anchor">#</a> ctx</h2> <p>picgo 传入插件的<code>ctx</code>其实就是 picgo 本身。<code>ctx</code>拥有 picgo 暴露的所有对象和方法。所以 picgo 本身拥有的方法，你在插件里使用的<code>ctx</code>也具备同样的方法。</p> <p>首先我们来初始化一个 picgo 实例。</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">const</span> PicGo <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'picgo'</span><span class="token punctuation">)</span>
<span class="token keyword">const</span> picgo <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">PicGo</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p>接下去介绍 picgo 的详细 API。</p> <h2 id="upload-input"><a href="#upload-input" aria-hidden="true" class="header-anchor">#</a> upload([input])</h2> <p>picgo 的上传函数。</p> <ul><li>input: Array&lt;any&gt; || <code>undefined</code></li> <li>return: Promise&lt;<a href="https://github.com/PicGo/PicGo-Core/blob/f133d57562c413b0b6f9a9ca9a93bf19c1768f1f/src/types/index.d.ts#L169-L178" target="_blank" rel="noopener noreferrer">IImgInfo[]<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> | Error&gt; <span class="badge tip" style="vertical-align:top;" data-v-15b7b770>1.4.21+</span></li></ul> <p>upload 接收两种情况：</p> <ul><li>空数组或者<code>undefined</code></li></ul> <p>当为空数组或者<code>undefined</code>的时候，picgo 将会上传剪贴板里的第一张图片（由于跨平台限制只能为 <strong><code>png</code></strong> 格式）。若剪贴板里不存在图片将会报错。</p> <div class="custom-block tip"><p class="custom-block-title">提示</p> <p>Linux 平台需要安装<code>xclip</code></p></div> <p>示例：</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code>picgo<span class="token punctuation">.</span><span class="token function">upload</span><span class="token punctuation">(</span><span class="token punctuation">)</span>

<span class="token comment">// or</span>

picgo<span class="token punctuation">.</span><span class="token function">upload</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><ul><li>非空数组</li></ul> <p>当为非空数组的时候，对应于 picgo 默认的两种 transformer，支持 path 数组以及 base64 图片信息数组。参考 <a href="/PicGo-Core-Doc/zh/dev-guide/cli.html#transformer">Transformer</a> 章节。</p> <p>示例：</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code>picgo<span class="token punctuation">.</span><span class="token function">upload</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token string">'/xxx/xxx.jpg'</span><span class="token punctuation">,</span> <span class="token string">'/yyy/yyy.png'</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>从 <code>v1.4.21+</code> 开始，支持调用后获取结果：</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">const</span> <span class="token function-variable function">main</span> <span class="token operator">=</span> <span class="token keyword">async</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> res <span class="token operator">=</span> <span class="token keyword">await</span> picgo<span class="token punctuation">.</span><span class="token function">upload</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token string">'/xxx/xxx.jpg'</span><span class="token punctuation">,</span> <span class="token string">'/yyy/yyy.png'</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>res<span class="token punctuation">)</span> <span class="token comment">// [https://xxx.com/xxxxx.jpg, https://xxx.com/yyyyy.jpg]</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><h2 id="getconfig-name"><a href="#getconfig-name" aria-hidden="true" class="header-anchor">#</a> getConfig([name])</h2> <p>获取 picgo 的 config 信息。</p> <ul><li>name: string</li></ul> <p>默认的配置长这样：</p> <div class="language-json line-numbers-mode"><pre class="language-json"><code><span class="token punctuation">{</span>
  <span class="token property">&quot;picBed&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token property">&quot;current&quot;</span><span class="token operator">:</span> <span class="token string">&quot;smms&quot;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><p>你可以通过<code>getConfig()</code>获取完整信息：</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code>picgo<span class="token punctuation">.</span><span class="token function">getConfig</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>输出：</p> <div class="language-json line-numbers-mode"><pre class="language-json"><code><span class="token punctuation">{</span>
  <span class="token property">&quot;picBed&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token property">&quot;current&quot;</span><span class="token operator">:</span> <span class="token string">&quot;smms&quot;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token property">&quot;plugins&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>...<span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><p>或者你可以选择你要查看的具体配置项：</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code>picgo<span class="token punctuation">.</span><span class="token function">getConfig</span><span class="token punctuation">(</span><span class="token string">'picBed.current'</span><span class="token punctuation">)</span> <span class="token comment">// 支持多级查找</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>输出：<code>smms</code>。</p> <h2 id="setconfig-config"><a href="#setconfig-config" aria-hidden="true" class="header-anchor">#</a> setConfig(config)</h2> <p>配置 picgo 的 config 但不写入配置文件，用于上下文使用。</p> <ul><li>config: object</li></ul> <p>需要传入一个合法的对象去配置 picgo 的 config 信息。 <strong>这个方法不会写入配置文件</strong> ，一次流程执行结束后不会改变配置文件本身，却可以在流程过程中实现后续部件读取的配置。</p> <div class="custom-block warning"><p class="custom-block-title">注意</p> <p>如果是 GUI 插件，setConfig 虽然不会写入配置文件，但是会一直保存在 config 上下文中，如果插件有重置的需求，请在合适的地方调用 <code>unsetConfig</code>（见下文） 来重置 config。</p></div> <p>示例：</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code>picgo<span class="token punctuation">.</span><span class="token function">setConfig</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  <span class="token string">'picBed.current'</span><span class="token punctuation">:</span> <span class="token string">'gitlab'</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><h2 id="saveconfig-config"><a href="#saveconfig-config" aria-hidden="true" class="header-anchor">#</a> saveConfig(config)</h2> <p>配置 picgo 的 config 并写入配置文件，用于持久化保存配置。</p> <ul><li>config: object</li></ul> <p>需要传入一个合法的对象去配置 picgo 的 config 信息。<strong>这个方法会写入配置文件</strong>，并影响之后每次 picgo 读取的配置文件。</p> <p>示例：</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code>picgo<span class="token punctuation">.</span><span class="token function">saveConfig</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  <span class="token string">'picgo-plugin-test'</span><span class="token punctuation">:</span> <span class="token punctuation">{</span>
    xxx<span class="token punctuation">:</span> <span class="token string">'xxx'</span><span class="token punctuation">,</span>
    yyy<span class="token punctuation">:</span> <span class="token string">'yyy'</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><h2 id="unsetconfig-key-propname"><a href="#unsetconfig-key-propname" aria-hidden="true" class="header-anchor">#</a> unsetConfig(key, propName) <span class="badge tip" style="vertical-align:top;" data-v-15b7b770>1.4.0+</span></h2> <p>删除 picgo 的 config 中的某个配置但不写入配置文件，用于上下文使用。</p> <ul><li>key: string</li> <li>propName: string</li></ul> <p>传入需要删除的字段来删除 picgo 的 config 信息。 <strong>这个方法不会写入配置文件</strong> ，一次流程执行结束后不会改变配置文件本身。</p> <p>示例：</p> <p>原始的 config：</p> <div class="language-json line-numbers-mode"><pre class="language-json"><code><span class="token punctuation">{</span>
  <span class="token property">&quot;picgoPlugin&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token property">&quot;picgo-plugin-xxx&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span> ... <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><div class="language-js line-numbers-mode"><pre class="language-js"><code>picgo<span class="token punctuation">.</span><span class="token function">unsetConfig</span><span class="token punctuation">(</span><span class="token string">'picgoPlugin'</span><span class="token punctuation">,</span> <span class="token string">'picgo-plugin-xxx'</span><span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>unsetConfig 后的 config:</p> <div class="language-json line-numbers-mode"><pre class="language-json"><code><span class="token punctuation">{</span>
  <span class="token property">&quot;picgoPlugin&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><h2 id="removeconfig-key-propname"><a href="#removeconfig-key-propname" aria-hidden="true" class="header-anchor">#</a> removeConfig(key, propName) <span class="badge tip" style="vertical-align:top;" data-v-15b7b770>1.4.0+</span></h2> <p>删除 picgo 的 config 中的某个配置并写入配置文件，用于持久化保存配置。</p> <ul><li>key: string</li> <li>propName: string</li></ul> <p>传入需要删除的字段来删除 picgo 的 config 信息。 <strong>这个方法会写入配置文件</strong> ，并影响之后每次 picgo 读取的配置文件。</p> <p>示例：</p> <p>原始的 config file：</p> <div class="language-json line-numbers-mode"><pre class="language-json"><code><span class="token punctuation">{</span>
  <span class="token property">&quot;picgoPlugin&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token property">&quot;picgo-plugin-xxx&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span> ... <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><div class="language-js line-numbers-mode"><pre class="language-js"><code>picgo<span class="token punctuation">.</span><span class="token function">removesetConfig</span><span class="token punctuation">(</span><span class="token string">'picgoPlugin'</span><span class="token punctuation">,</span> <span class="token string">'picgo-plugin-xxx'</span><span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>removesetConfig 后的 config file:</p> <div class="language-json line-numbers-mode"><pre class="language-json"><code><span class="token punctuation">{</span>
  <span class="token property">&quot;picgoPlugin&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><h2 id="emit-event-message"><a href="#emit-event-message" aria-hidden="true" class="header-anchor">#</a> emit(event, [message])</h2> <p>事件派发。继承于 EventEmmitter。</p> <ul><li>event: string</li> <li>message: any</li></ul> <p>通过<code>emit</code>可以派发事件，再通过<code>on</code>方法监听。</p> <div class="custom-block tip"><p class="custom-block-title">提示</p> <p>一个特殊的事件名是<code>notification</code>，picgo 以及一些插件将会使用这个事件名，详情可以查看 <a href="/PicGo-Core-Doc/zh/dev-guide/cli.html#消息通知">消息通知</a>章节。</p></div> <p>示例：</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code>picgo<span class="token punctuation">.</span><span class="token function">emit</span><span class="token punctuation">(</span><span class="token string">'xxx'</span><span class="token punctuation">,</span> <span class="token punctuation">{</span> message<span class="token punctuation">:</span> <span class="token string">'xxx'</span> <span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><h2 id="on-event-callback"><a href="#on-event-callback" aria-hidden="true" class="header-anchor">#</a> on(event, [callback])</h2> <p>事件监听。继承于 EventEmmitter。</p> <ul><li>event: string</li> <li>callback: function</li></ul> <p>通过<code>on</code>可以监听<code>emit</code>派发的事件。picgo 自带的事件可以参考 <a href="/PicGo-Core-Doc/zh/guide/use-in-node.html#事件监听">事件监听</a>一章。</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code>picgo<span class="token punctuation">.</span><span class="token function">emit</span><span class="token punctuation">(</span><span class="token string">'xxx'</span><span class="token punctuation">,</span> <span class="token parameter">message</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>message<span class="token punctuation">)</span> <span class="token comment">// { message: 'xxx' }</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><h2 id="input"><a href="#input" aria-hidden="true" class="header-anchor">#</a> input</h2> <ul><li>type: Array&lt;any&gt;</li></ul> <p>picgo 的输入。是一个数组。</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code>console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>picgo<span class="token punctuation">.</span>input<span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><h2 id="output"><a href="#output" aria-hidden="true" class="header-anchor">#</a> output</h2> <ul><li>type: Array&lt;any&gt;</li></ul> <p>picgo 的输出。是一个数组。通常上传成功之后要给这个数组里每一项加入<code>imgUrl</code>以及<code>url</code>项。可以参考 picgo 默认的 <a href="https://github.com/PicGo/PicGo-Core/blob/dev/src/plugins/uploader/smms.ts#L25-L37" target="_blank" rel="noopener noreferrer">smms<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> Uploader。</p> <div class="custom-block warning"><p class="custom-block-title">注意</p> <p>input 通过 Transformer 之后就会进入 output 数组中，而不是经过 Uploader 才会变成 output。</p></div> <div class="language-js line-numbers-mode"><pre class="language-js"><code>console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>picgo<span class="token punctuation">.</span>output<span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><h2 id="configpath"><a href="#configpath" aria-hidden="true" class="header-anchor">#</a> configPath</h2> <ul><li>type: string</li></ul> <p>picgo 的 config 所在路径。</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code>console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>picgo<span class="token punctuation">.</span>configPath<span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><h2 id="basedir"><a href="#basedir" aria-hidden="true" class="header-anchor">#</a> baseDir</h2> <ul><li>type: string</li></ul> <p>picgo 的 config 文件所在的文件夹路径。</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code>console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>picgo<span class="token punctuation">.</span>baseDir<span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><h2 id="version"><a href="#version" aria-hidden="true" class="header-anchor">#</a> VERSION</h2> <ul><li>type: string</li></ul> <p>获取当前 picgo 的版本。</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code>console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>picgo<span class="token punctuation">.</span><span class="token constant">VERSION</span><span class="token punctuation">)</span> <span class="token comment">// x.x.x</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><h2 id="gui-version"><a href="#gui-version" aria-hidden="true" class="header-anchor">#</a> GUI_VERSION</h2> <ul><li>type: string || undefined</li></ul> <p>如果当前环境为 PicGo GUI，可以获取当前 PicGo GUI 的版本，否则是undefined。</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code>console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>picgo<span class="token punctuation">.</span><span class="token constant">GUI_VERSION</span><span class="token punctuation">)</span> <span class="token comment">// x.x.x</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><h2 id="helper"><a href="#helper" aria-hidden="true" class="header-anchor">#</a> helper</h2> <p>helper 是 picgo 的主要插件的集中管理者，包含 5 个部件，拥有相同的 api，不过所在生命周期不同，详情可见 <a href="/PicGo-Core-Doc/zh/dev-guide/cli.html">生命周期流程</a>。因此只介绍<code>helper.transformer</code>即可。</p> <h3 id="helper-transformer"><a href="#helper-transformer" aria-hidden="true" class="header-anchor">#</a> helper.transformer</h3> <h4 id="register-id-plugin"><a href="#register-id-plugin" aria-hidden="true" class="header-anchor">#</a> register(id, plugin)</h4> <ul><li>id: string</li> <li>plugin: object</li></ul> <p>如果你只是要开发一个简单的插件，而不是发布一个 npm 包的话（发布 picgo 的 npm 插件包请查看 <a href="/PicGo-Core-Doc/zh/dev-guide/cli.html">插件开发指南</a>），那么只需要调用<code>helper[module].register</code>方法即可。</p> <p>第一个参数代表插件的 id（相同的部件只能拥有唯一的 id，不过不同的部件可以拥有相同的 id），第二个参数应当是一个对象，至少包括一个<code>handle</code>方法供 picgo 调用。如果你还想要拥有 <a href="/PicGo-Core-Doc/zh/dev-guide/cli.html#配置项的处理">配置项</a> 功能，可以考虑再加入<code>config</code>方法供 picgo 调用。</p> <p>示例：</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code>picgo<span class="token punctuation">.</span>helper<span class="token punctuation">.</span>transformer<span class="token punctuation">.</span><span class="token function">register</span><span class="token punctuation">(</span><span class="token string">'test'</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
  <span class="token function">handle</span> <span class="token punctuation">(</span><span class="token parameter">ctx</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> ctx
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token function">config</span> <span class="token punctuation">(</span><span class="token parameter">ctx</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token punctuation">[</span><span class="token operator">...</span><span class="token punctuation">]</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><h3 id="helper-uploader"><a href="#helper-uploader" aria-hidden="true" class="header-anchor">#</a> helper.uploader</h3> <p>同上。</p> <h3 id="helper-beforetransformplugins"><a href="#helper-beforetransformplugins" aria-hidden="true" class="header-anchor">#</a> helper.beforeTransformPlugins</h3> <p>同上，不过不拥有配置项功能。</p> <h3 id="helper-beforeuploadplugins"><a href="#helper-beforeuploadplugins" aria-hidden="true" class="header-anchor">#</a> helper.beforeUploadPlugins</h3> <p>同上，不过不拥有配置项功能。</p> <h3 id="helper-afteruploadplugins"><a href="#helper-afteruploadplugins" aria-hidden="true" class="header-anchor">#</a> helper.afterUploadPlugins</h3> <p>同上，不过不拥有配置项功能。</p> <h2 id="request-request"><a href="#request-request" aria-hidden="true" class="header-anchor">#</a> Request.request <span class="badge warning" style="vertical-align:top;" data-v-15b7b770>deprecate</span></h2> <p><strong>v1.5.0开始这个属性被废弃，请直接使用 <a href="#request"><code>ctx.request</code></a>。</strong></p> <p>以下是 1.5.0 之前的文档，已经被废弃不再维护：</p> <p>Request.request 是 picgo 内部暴露的一个 <a href="https://github.com/request/request-promise-native" target="_blank" rel="noopener noreferrer">Request-Promise-Native<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> 对象，拥有一个可以使用 <a href="https://github.com/request/request" target="_blank" rel="noopener noreferrer">request<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> 库里的所有方法，并且返回的是原生的 Promise。</p> <div class="custom-block tip"><p class="custom-block-title">小贴士</p> <p>值得注意的是，使用这个对象来发送请求的话，能自动读取用户配置给 picgo 的 <code>proxy</code> 值。比较适合用于书写 Uploder 的核心部分。</p></div> <p>示例：</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code>picgo<span class="token punctuation">.</span>Request<span class="token punctuation">.</span><span class="token function">request</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  method<span class="token punctuation">:</span> <span class="token string">'post'</span><span class="token punctuation">,</span>
  uri<span class="token punctuation">:</span> <span class="token string">'xxxx'</span><span class="token punctuation">,</span>
  body<span class="token punctuation">:</span> fs<span class="token punctuation">.</span><span class="token function">readFileSync</span><span class="token punctuation">(</span><span class="token string">'yyy'</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><h2 id="request"><a href="#request" aria-hidden="true" class="header-anchor">#</a> request <span class="badge tip" style="vertical-align:top;" data-v-15b7b770>1.4.16+</span> <span class="badge tip" style="vertical-align:top;" data-v-15b7b770>1.5.0+</span></h2> <div class="custom-block tip"><p class="custom-block-title">小贴士</p> <p>值得注意的是，使用这个对象来发送请求的话，能自动读取用户配置给 picgo 的 <code>proxy</code> 值。比较适合用于书写 Uploder 的核心部分。</p></div> <p>从 <code>v1.4.16</code> 开始，默认的请求方法从 <code>ctx.Request.request</code> 换成了 <code>ctx.request</code>。</p> <ul><li><code>v1.5.0</code> 之前底层实现是 <a href="https://github.com/request/request-promise-native" target="_blank" rel="noopener noreferrer">Request-Promise-Native<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li><code>v1.5.0</code> 开始，底层实现是 <a href="https://github.com/axios/axios" target="_blank" rel="noopener noreferrer">axios<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul> <p>这里将不再介绍旧的实现的使用方法，而是直接介绍新的实现的使用方法。</p> <p>总体而言，请求的配置可以参考 <a href="https://github.com/axios/axios#request-config" target="_blank" rel="noopener noreferrer">axios 文档 request-config 部分<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>，不过 picgo 为了兼容旧的 <code>request</code> API，做了如下的处理，希望开发者注意：</p> <ol><li>请求体里如果不带有 <code>resolveWithFullResponse: true</code>, 那么返回的是 <code>response.data</code>，而不是 <code>response</code> （带有  <code>status</code> 等信息）。</li> <li>如果希望返回值是 <code>Buffer</code>，请把 <code>responseType</code> 设置为 <code>arraybuffer</code>。</li></ol> <p>picgo 提供了几个比较有用的类型方便开发者使用：</p> <ol><li><code>IReqOptions</code>：带有 <code>resolveWithFullResponse: true</code> 的请求配置类型。</li> <li><code>IReqOptionsWithArrayBufferRes</code>：带有 <code>resolveWithFullResponse: true</code> 和 <code>responseType: 'arraybuffer'</code> 的请求配置类型。</li> <li><code>IReqOptionsWithBodyResOnly</code>： <code>axios</code> 的原始请求配置类型，返回值只有 <code>response.data</code>。</li></ol> <div class="custom-block tip"><p class="custom-block-title">注意</p> <p>request 接口的返回值依然是个 Promise，所以依然推荐使用 <code>async/await</code> 的方式来使用。</p></div> <p>示例：</p> <div class="language-ts line-numbers-mode"><pre class="language-ts"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> IReqOptions <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'picgo'</span>

<span class="token keyword">const</span> opt<span class="token punctuation">:</span> IReqOptions <span class="token operator">=</span> <span class="token punctuation">{</span>
  method<span class="token punctuation">:</span> <span class="token string">'post'</span><span class="token punctuation">,</span>
  url<span class="token punctuation">:</span> <span class="token string">'xxxx'</span><span class="token punctuation">,</span>
  data<span class="token punctuation">:</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
  resolveWithFullResponse<span class="token punctuation">:</span> <span class="token boolean">true</span> <span class="token comment">// &lt;-- 这里设置为 true，返回值会带上 status 等</span>
<span class="token punctuation">}</span>

<span class="token keyword">interface</span> <span class="token class-name">IRes</span> <span class="token punctuation">{</span>
  <span class="token comment">// ...</span>
<span class="token punctuation">}</span>

<span class="token keyword">const</span> res <span class="token operator">=</span> <span class="token keyword">await</span> ctx<span class="token punctuation">.</span><span class="token function">request</span><span class="token punctuation">(</span>opt<span class="token punctuation">)</span> <span class="token comment">// { status: number, data: IRes }</span>

<span class="token comment">// ------------------------------</span>

<span class="token keyword">import</span> <span class="token punctuation">{</span> IReqOptionsWithArrayBufferRes <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'picgo'</span>

<span class="token keyword">const</span> opt<span class="token punctuation">:</span> IReqOptions <span class="token operator">=</span> <span class="token punctuation">{</span>
  method<span class="token punctuation">:</span> <span class="token string">'post'</span><span class="token punctuation">,</span>
  url<span class="token punctuation">:</span> <span class="token string">'xxxx'</span><span class="token punctuation">,</span>
  data<span class="token punctuation">:</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
  resolveWithFullResponse<span class="token punctuation">:</span> <span class="token boolean">true</span> <span class="token comment">// &lt;-- 这里设置为 true，返回值会带上 status 等</span>
  responseType<span class="token punctuation">:</span> <span class="token string">'arraybuffer'</span> <span class="token comment">// &lt;-- 这里设置为 arraybuffer，返回值 data 会是 Buffer</span>
<span class="token punctuation">}</span>

<span class="token keyword">const</span> res <span class="token operator">=</span> <span class="token keyword">await</span> ctx<span class="token punctuation">.</span><span class="token function">request</span><span class="token punctuation">(</span>opt<span class="token punctuation">)</span> <span class="token comment">// { status: number, data: Buffer }</span>

<span class="token comment">// ------------------------------</span>

<span class="token keyword">import</span> <span class="token punctuation">{</span> IReqOptionsWithBodyResOnly <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'picgo'</span>

<span class="token keyword">const</span> opt<span class="token punctuation">:</span> IReqOptions <span class="token operator">=</span> <span class="token punctuation">{</span>
  method<span class="token punctuation">:</span> <span class="token string">'post'</span><span class="token punctuation">,</span>
  url<span class="token punctuation">:</span> <span class="token string">'xxxx'</span><span class="token punctuation">,</span>
  data<span class="token punctuation">:</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span>

<span class="token keyword">interface</span> <span class="token class-name">IRes</span> <span class="token punctuation">{</span>
  <span class="token comment">// ...</span>
<span class="token punctuation">}</span>

<span class="token keyword">const</span> res<span class="token punctuation">:</span> IRes <span class="token operator">=</span> <span class="token keyword">await</span> ctx<span class="token punctuation">.</span><span class="token function">request</span><span class="token punctuation">(</span>opt<span class="token punctuation">)</span> <span class="token comment">// IRes</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br></div></div><h2 id="cmd"><a href="#cmd" aria-hidden="true" class="header-anchor">#</a> cmd</h2> <p>用于提供 picgo 的命令行程序。</p> <h3 id="cmd-program"><a href="#cmd-program" aria-hidden="true" class="header-anchor">#</a> cmd.program</h3> <p>用于注册 CLI 命令。实际上是一个 <a href="https://github.com/tj/commander.js/" target="_blank" rel="noopener noreferrer">commander.js<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> 的实例，用法和<code>commander.js</code>几乎一致。 <strong>不过请不要手动调用 picgo.cmd.program.parse(process.argv) 否则会导致出错</strong> 。参考 [注册命令](/zh/dev-guide/cli.html#注册 cli 命令)一章。</p> <p>示例：</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code>picgo<span class="token punctuation">.</span>cmd<span class="token punctuation">.</span>program
  <span class="token punctuation">.</span><span class="token function">commands</span><span class="token punctuation">(</span><span class="token string">'test'</span><span class="token punctuation">,</span> <span class="token string">'This is a test commands'</span><span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token function">action</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token number">123</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><h3 id="cmd-inquirer"><a href="#cmd-inquirer" aria-hidden="true" class="header-anchor">#</a> cmd.inquirer</h3> <p>用于提供 CLI 命令行交互。实际上是一个 <a href="https://github.com/SBoudrias/Inquirer.js/" target="_blank" rel="noopener noreferrer">inquirer.js<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> 的实例，用法和<code>inquirer.js</code>一致。参考 <a href="/PicGo-Core-Doc/zh/dev-guide/cli.html#配置项的处理">配置项的处理</a> 一章。通常 PicGo 内部会将其和插件的 <a href="/PicGo-Core-Doc/zh/dev-guide/cli.html#config方法">config</a> 方法一起使用。</p> <p>示例：</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">const</span> <span class="token function-variable function">handleConfig</span> <span class="token operator">=</span> <span class="token keyword">async</span> <span class="token parameter">ctx</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> prompts <span class="token operator">=</span> <span class="token function">config</span><span class="token punctuation">(</span>ctx<span class="token punctuation">)</span>
  <span class="token keyword">const</span> answer <span class="token operator">=</span> <span class="token keyword">await</span> ctx<span class="token punctuation">.</span>cmd<span class="token punctuation">.</span>inquirer<span class="token punctuation">.</span><span class="token function">prompt</span><span class="token punctuation">(</span>prompts<span class="token punctuation">)</span>
  ctx<span class="token punctuation">.</span><span class="token function">saveConfig</span><span class="token punctuation">(</span><span class="token punctuation">{</span> <span class="token comment">// 调用 saveConfig 保存配置</span>
    <span class="token string">'picBed.xxx'</span><span class="token punctuation">:</span> answer
  <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><div class="custom-block tip"><p class="custom-block-title">提示</p> <p>你可以通过这个工具来制作你自己的命令行交互。不过需要注意的是，通常你应该直接使用插件的 <a href="/PicGo-Core-Doc/zh/dev-guide/cli.html#config方法">config</a> 方法来实现命令行交互，并且 PicGo 会自动存储<code>config</code>相关配置项的结果。</p></div> <h2 id="log"><a href="#log" aria-hidden="true" class="header-anchor">#</a> log</h2> <p>用于在命令行输出漂亮的信息，给予用户提示。</p> <p>截图：</p> <p><img src="https://pic.molunerfinn.com/picgo/docs/logs.png" alt=""></p> <h3 id="log-info-message"><a href="#log-info-message" aria-hidden="true" class="header-anchor">#</a> log.info(message)</h3> <ul><li>message: string</li></ul> <p>示例：</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code>picgo<span class="token punctuation">.</span>log<span class="token punctuation">.</span><span class="token function">info</span><span class="token punctuation">(</span><span class="token string">'Hello world'</span><span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><h3 id="log-warn-message"><a href="#log-warn-message" aria-hidden="true" class="header-anchor">#</a> log.warn(message)</h3> <ul><li>message: string</li></ul> <p>示例：</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code>picgo<span class="token punctuation">.</span>log<span class="token punctuation">.</span><span class="token function">warn</span><span class="token punctuation">(</span><span class="token string">'Hello world'</span><span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><h3 id="log-success-message"><a href="#log-success-message" aria-hidden="true" class="header-anchor">#</a> log.success(message)</h3> <ul><li>message: string</li></ul> <p>示例：</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code>picgo<span class="token punctuation">.</span>log<span class="token punctuation">.</span><span class="token function">success</span><span class="token punctuation">(</span><span class="token string">'Hello world'</span><span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><h3 id="log-error-message"><a href="#log-error-message" aria-hidden="true" class="header-anchor">#</a> log.error(message)</h3> <ul><li>message: string | error</li></ul> <p>示例：</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code>picgo<span class="token punctuation">.</span>log<span class="token punctuation">.</span><span class="token function">error</span><span class="token punctuation">(</span><span class="token string">'Hello world'</span><span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><h2 id="pluginhandler"><a href="#pluginhandler" aria-hidden="true" class="header-anchor">#</a> PluginHandler <span class="badge tip" style="vertical-align:top;" data-v-15b7b770>1.4.0+</span></h2> <p>提供了安装、更新、卸载 picgo 插件的底层接口。同时还暴露了对应的成功、失败事件用于开发者处理。 <strong>它依赖于系统 npm 命令。</strong></p> <h3 id="pluginhandler-install-pluginname"><a href="#pluginhandler-install-pluginname" aria-hidden="true" class="header-anchor">#</a> pluginHandler.install([...pluginName])</h3> <ul><li>return: Promise&lt;<a href="https://github.com/PicGo/PicGo-Core/blob/f133d57562c413b0b6f9a9ca9a93bf19c1768f1f/src/types/index.d.ts#L339" target="_blank" rel="noopener noreferrer">IPluginHandlerResult<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>&gt; <span class="badge tip" style="vertical-align:top;" data-v-15b7b770>1.4.19+</span></li></ul> <p>用于安装插件，接收一个数组作为参数。其中 <code>pluginName</code>：</p> <ol><li>可以为完整的 picgo 插件名字，比如 <code>picgo-plugin-xxx</code>。</li> <li>也可以是简化名 <code>xxx</code>。</li> <li>支持scope类型插件，比如 <code>@xxx/picgo-plugin-yyy</code>。</li> <li>还支持本地路径。例如 <code>./xxx/yyy/picgo-plugin-zzz</code>。</li></ol> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">const</span> res <span class="token operator">=</span> picgo<span class="token punctuation">.</span>pluginHandler<span class="token punctuation">.</span><span class="token function">install</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token string">'xxx'</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
picgo<span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span><span class="token string">'installSuccess'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">res</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>res<span class="token punctuation">)</span> <span class="token comment">// ['picgo-plugin-xxx']</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
picgo<span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span><span class="token string">'installFailed'</span><span class="token punctuation">,</span> <span class="token parameter">err</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">)</span>

<span class="token comment">// v1.4.19 开始会直接返回调用结果。示例：</span>
res<span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">result</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>result<span class="token punctuation">.</span>success<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>result<span class="token punctuation">.</span>body<span class="token punctuation">)</span> <span class="token comment">// ['picgo-plugin-xxx']</span>
  <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>result<span class="token punctuation">.</span>body<span class="token punctuation">)</span> <span class="token comment">// error message</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br></div></div><h3 id="pluginhandler-uninstall-pluginname"><a href="#pluginhandler-uninstall-pluginname" aria-hidden="true" class="header-anchor">#</a> pluginHandler.uninstall([...pluginName])</h3> <ul><li>return: Promise&lt;<a href="https://github.com/PicGo/PicGo-Core/blob/f133d57562c413b0b6f9a9ca9a93bf19c1768f1f/src/types/index.d.ts#L339" target="_blank" rel="noopener noreferrer">IPluginHandlerResult<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>&gt; <span class="badge tip" style="vertical-align:top;" data-v-15b7b770>1.4.19+</span></li></ul> <p>用于卸载插件，接收一个数组作为参数。其中 <code>pluginName</code>：</p> <ol><li>可以为完整的 picgo 插件名字，比如 <code>picgo-plugin-xxx</code>。</li> <li>也可以是简化名 <code>xxx</code>。</li> <li>支持scope类型插件，比如 <code>@xxx/picgo-plugin-yyy</code>。</li> <li>还支持本地路径。例如 <code>./xxx/yyy/picgo-plugin-zzz</code>。</li></ol> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">const</span> res <span class="token operator">=</span> picgo<span class="token punctuation">.</span>pluginHandler<span class="token punctuation">.</span><span class="token function">uninstall</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token string">'xxx'</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
picgo<span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span><span class="token string">'uninstallSuccess'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">res</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>res<span class="token punctuation">)</span> <span class="token comment">// ['picgo-plugin-xxx']</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
picgo<span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span><span class="token string">'uninstallFailed'</span><span class="token punctuation">,</span> <span class="token parameter">err</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">)</span>

<span class="token comment">// v1.4.19 开始会直接返回调用结果。示例：</span>
res<span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">result</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>result<span class="token punctuation">.</span>success<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>result<span class="token punctuation">.</span>body<span class="token punctuation">)</span> <span class="token comment">// ['picgo-plugin-xxx']</span>
  <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>result<span class="token punctuation">.</span>body<span class="token punctuation">)</span> <span class="token comment">// error message</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br></div></div><h3 id="pluginhandler-update-pluginname"><a href="#pluginhandler-update-pluginname" aria-hidden="true" class="header-anchor">#</a> pluginHandler.update([...pluginName])</h3> <ul><li>return: Promise&lt;<a href="https://github.com/PicGo/PicGo-Core/blob/f133d57562c413b0b6f9a9ca9a93bf19c1768f1f/src/types/index.d.ts#L339" target="_blank" rel="noopener noreferrer">IPluginHandlerResult<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>&gt; <span class="badge tip" style="vertical-align:top;" data-v-15b7b770>1.4.19+</span></li></ul> <p>用于更新插件，接收一个数组作为参数。其中 <code>pluginName</code>：</p> <ol><li>可以为完整的 picgo 插件名字，比如 <code>picgo-plugin-xxx</code>。</li> <li>也可以是简化名 <code>xxx</code>。</li> <li>支持scope类型插件，比如 <code>@xxx/picgo-plugin-yyy</code>。</li> <li>还支持本地路径。例如 <code>./xxx/yyy/picgo-plugin-zzz</code>。</li></ol> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">const</span> res <span class="token operator">=</span> picgo<span class="token punctuation">.</span>pluginHandler<span class="token punctuation">.</span><span class="token function">update</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token string">'xxx'</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
picgo<span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span><span class="token string">'updateSuccess'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">res</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>res<span class="token punctuation">)</span> <span class="token comment">// ['picgo-plugin-xxx']</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
picgo<span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span><span class="token string">'updateFailed'</span><span class="token punctuation">,</span> <span class="token parameter">err</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">)</span>

<span class="token comment">// v1.4.19 开始会直接返回调用结果。示例：</span>
res<span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">result</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>result<span class="token punctuation">.</span>success<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>result<span class="token punctuation">.</span>body<span class="token punctuation">)</span> <span class="token comment">// ['picgo-plugin-xxx']</span>
  <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>result<span class="token punctuation">.</span>body<span class="token punctuation">)</span> <span class="token comment">// error message</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br></div></div><h2 id="pluginloader"><a href="#pluginloader" aria-hidden="true" class="header-anchor">#</a> PluginLoader <span class="badge tip" style="vertical-align:top;" data-v-15b7b770>1.4.17+</span></h2> <p>提供了动态加载、卸载 picgo 插件的方法。比较适合用于在 Node 项目中使用 picgo 时动态引入插件。</p> <h3 id="pluginloader-registerplugin-pluginname-plugin"><a href="#pluginloader-registerplugin-pluginname-plugin" aria-hidden="true" class="header-anchor">#</a> pluginLoader.registerPlugin(pluginName, plugin)</h3> <ul><li>pluginName: string</li> <li>plugin: <a href="https://github.com/PicGo/PicGo-Core/blob/f133d57562c413b0b6f9a9ca9a93bf19c1768f1f/src/types/index.d.ts#L352" target="_blank" rel="noopener noreferrer">IPicGoPlugin<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul> <p>用于注册并加载插件。</p> <p>示例：</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">const</span> pluginXXX <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'picgo-plugin-xxx'</span><span class="token punctuation">)</span>

<span class="token comment">// 注意pluginName要唯一</span>
picgo<span class="token punctuation">.</span>pluginLoader<span class="token punctuation">.</span><span class="token function">registerPlugin</span><span class="token punctuation">(</span><span class="token string">'xxx'</span><span class="token punctuation">,</span> pluginXXX<span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><h3 id="pluginloader-unregisterplugin-pluginname"><a href="#pluginloader-unregisterplugin-pluginname" aria-hidden="true" class="header-anchor">#</a> pluginLoader.unregisterPlugin(pluginName)</h3> <p>用于卸载插件。</p> <p>示例：</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">// 注意pluginName要唯一</span>
picgo<span class="token punctuation">.</span>pluginLoader<span class="token punctuation">.</span><span class="token function">unregisterPlugin</span><span class="token punctuation">(</span><span class="token string">'xxx'</span><span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><h3 id="pluginloader-getplugin-pluginname"><a href="#pluginloader-getplugin-pluginname" aria-hidden="true" class="header-anchor">#</a> pluginLoader.getPlugin(pluginName)</h3> <ul><li>return: plugin -&gt; <a href="https://github.com/PicGo/PicGo-Core/blob/f133d57562c413b0b6f9a9ca9a93bf19c1768f1f/src/types/index.d.ts#L352" target="_blank" rel="noopener noreferrer">IPicGoPlugin<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul> <p>用于获取某个插件。</p> <p>示例：</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">const</span> plugin <span class="token operator">=</span> picgo<span class="token punctuation">.</span>pluginLoader<span class="token punctuation">.</span><span class="token function">getPlugin</span><span class="token punctuation">(</span><span class="token string">'xxx'</span><span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><h3 id="pluginloader-hasplugin-pluginname"><a href="#pluginloader-hasplugin-pluginname" aria-hidden="true" class="header-anchor">#</a> pluginLoader.hasPlugin(pluginName)</h3> <p>用于确认是否存在某个插件。</p> <ul><li>return: boolean</li></ul> <p>示例：</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">const</span> res <span class="token operator">=</span> picgo<span class="token punctuation">.</span>pluginLoader<span class="token punctuation">.</span><span class="token function">hasPlugin</span><span class="token punctuation">(</span><span class="token string">'xxx'</span><span class="token punctuation">)</span> <span class="token comment">// true or false</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><h2 id="use"><a href="#use" aria-hidden="true" class="header-anchor">#</a> use <span class="badge tip" style="vertical-align:top;" data-v-15b7b770>1.5.0+</span></h2> <p>比 <a href="#pluginloader">PluginLoader</a> 更加简单的插件加载方式。适合在 Node 项目中使用 picgo 时动态引入插件。</p> <ul><li>(plugin: IPicGoPlugin, name?: string): IPicGoPluginInterface</li></ul> <ol><li>第一个参数是 picgo 插件导出对象，通常是以 npm 包的形式出现的。</li> <li>如果第二个参数 <code>name</code> 为空，则只会实例化这个插件而不会把插件注册进 PicGo 的列表里。这通常在你需要动态加载插件的时候使用。以下是实际例子：</li></ol> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">const</span> <span class="token punctuation">{</span> PicGo <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'picgo'</span><span class="token punctuation">)</span>
<span class="token keyword">const</span> PluginMigrater <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'picgo-plugin-pic-migrater'</span><span class="token punctuation">)</span>
<span class="token keyword">const</span> MinioUploader <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'picgo-plugin-minio'</span><span class="token punctuation">)</span>

<span class="token keyword">const</span> picgo <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">PicGo</span><span class="token punctuation">(</span><span class="token punctuation">)</span>

<span class="token keyword">const</span> plugin <span class="token operator">=</span> picgo<span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span>PluginMigrater<span class="token punctuation">)</span> <span class="token comment">// will not register this plugin, just use it</span>
picgo<span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span>MinioUploader<span class="token punctuation">,</span> <span class="token string">'minio'</span><span class="token punctuation">)</span> <span class="token comment">// will register this plugin</span>

picgo<span class="token punctuation">.</span><span class="token function">setConfig</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  <span class="token string">'picgo-plugin-pic-migrater'</span><span class="token punctuation">:</span> <span class="token punctuation">{</span>
    newFileSuffix<span class="token punctuation">:</span> <span class="token string">'_new'</span><span class="token punctuation">,</span>
    include<span class="token punctuation">:</span> <span class="token string">''</span><span class="token punctuation">,</span>
    exclude<span class="token punctuation">:</span> <span class="token string">''</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  picBed<span class="token punctuation">:</span> <span class="token punctuation">{</span>
    current<span class="token punctuation">:</span> <span class="token string">'minio'</span><span class="token punctuation">,</span> <span class="token comment">// use minio config</span>
    uploader<span class="token punctuation">:</span> <span class="token string">'minio'</span><span class="token punctuation">,</span>
    minio<span class="token punctuation">:</span> <span class="token punctuation">{</span>
      endpoint<span class="token punctuation">:</span> <span class="token string">'http://localhost:9000'</span><span class="token punctuation">,</span>
      accessKey<span class="token punctuation">:</span> <span class="token string">'minioadmin'</span><span class="token punctuation">,</span>
      secretKey<span class="token punctuation">:</span> <span class="token string">'minioadmin'</span><span class="token punctuation">,</span>
      bucket<span class="token punctuation">:</span> <span class="token string">'picgo'</span><span class="token punctuation">,</span>
      path<span class="token punctuation">:</span> <span class="token string">'/'</span><span class="token punctuation">,</span>
      useSSL<span class="token punctuation">:</span> <span class="token boolean">false</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>

<span class="token comment">// will use minio for migrating</span>
plugin<span class="token punctuation">.</span><span class="token function">migrateFiles</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token string">'/xxx/yyy.md'</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token comment">// { total: number, success: number }</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br></div></div><h2 id="i18n"><a href="#i18n" aria-hidden="true" class="header-anchor">#</a> i18n <span class="badge tip" style="vertical-align:top;" data-v-15b7b770>1.5.0+</span></h2> <p>提供国际化支持。目前支持的语言有：</p> <ul><li><code>zh-CN</code> (默认)</li> <li><code>zh-TW</code></li> <li><code>en</code></li></ul> <p>如果想为 picgo 添加默认的语言支持，请参考这个 <a href="https://github.com/PicGo/PicGo-Core/pull/135" target="_blank" rel="noopener noreferrer">PR<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>。</p> <h3 id="i18n-addlocale-language-string-locales-ilocale"><a href="#i18n-addlocale-language-string-locales-ilocale" aria-hidden="true" class="header-anchor">#</a> i18n.addLocale(language: string, locales: ILocale)</h3> <p>用于向已有的语言中添加语言包。</p> <ul><li>language: string</li> <li>locales: <code>[key: string]: any</code></li> <li>return: 返回 boolean ，表示是否添加成功</li></ul> <div class="language-js line-numbers-mode"><pre class="language-js"><code>picgo<span class="token punctuation">.</span>i18n<span class="token punctuation">.</span><span class="token function">addLocale</span><span class="token punctuation">(</span><span class="token string">'zh-CN'</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
  <span class="token string">'PICGO_CURRENT_PICBED'</span><span class="token punctuation">:</span> <span class="token string">'当前图床'</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>

<span class="token keyword">const</span> text <span class="token operator">=</span> picgo<span class="token punctuation">.</span>i18n<span class="token punctuation">.</span><span class="token function">translate</span><span class="token punctuation">(</span><span class="token string">'PICGO_CURRENT_PICBED'</span><span class="token punctuation">)</span> <span class="token comment">// 当前图床</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><h3 id="i18n-translate-key-t-args-string"><a href="#i18n-translate-key-t-args-string" aria-hidden="true" class="header-anchor">#</a> i18n.translate(key: T, args?: {}) =&gt; string)</h3> <p>翻译文本。</p> <ul><li>key: string | T (T 是一个枚举类型，包含了所有的文本 key)</li> <li>args: object (可选)，如果文本带有参数可以通过这个来传入</li> <li>return: string</li></ul> <div class="language-js line-numbers-mode"><pre class="language-js"><code>picgo<span class="token punctuation">.</span>i18n<span class="token punctuation">.</span><span class="token function">addLocale</span><span class="token punctuation">(</span><span class="token string">'zh-CN'</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
  <span class="token string">'PICGO_CURRENT_PICBED'</span><span class="token punctuation">:</span> <span class="token string">'当前图床是 ${current}'</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>

<span class="token keyword">const</span> text <span class="token operator">=</span> picgo<span class="token punctuation">.</span>i18n<span class="token punctuation">.</span><span class="token function">translate</span><span class="token punctuation">(</span><span class="token string">'PICGO_CURRENT_PICBED'</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
  current<span class="token punctuation">:</span> <span class="token string">'sm.ms'</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span> <span class="token comment">// 当前图床是 sm.ms</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><h3 id="i18n-setlanguage-language-string"><a href="#i18n-setlanguage-language-string" aria-hidden="true" class="header-anchor">#</a> i18n.setLanguage(language: string)</h3> <p>设置语言。</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code>picgo<span class="token punctuation">.</span>i18n<span class="token punctuation">.</span><span class="token function">setLanguage</span><span class="token punctuation">(</span><span class="token string">'zh-TW'</span><span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><h3 id="i18n-addlanguage-language-string-locales-ilocale"><a href="#i18n-addlanguage-language-string-locales-ilocale" aria-hidden="true" class="header-anchor">#</a> i18n.addLanguage(language: string, locales: ILocale)</h3> <ul><li>language: string</li> <li>locales: <code>[key: string]: any</code></li></ul> <p>添加一种新的语言类型。注意如果添加一种新的语言，那么建议请先实现默认的语言包里的 <a href="https://github.com/PicGo/PicGo-Core/blob/dev/src/i18n/zh-CN.ts" target="_blank" rel="noopener noreferrer">所有文本<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> ，否则可能会出现未知的问题。</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code>picgo<span class="token punctuation">.</span>i18n<span class="token punctuation">.</span><span class="token function">addLanguage</span><span class="token punctuation">(</span><span class="token string">'jp'</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
  <span class="token comment">// ...</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><h3 id="i18n-getlanguagelist"><a href="#i18n-getlanguagelist" aria-hidden="true" class="header-anchor">#</a> i18n.getLanguageList()</h3> <ul><li>return: string[]</li></ul> <p>返回当前所有的语言列表。</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">const</span> list <span class="token operator">=</span> picgo<span class="token punctuation">.</span>i18n<span class="token punctuation">.</span><span class="token function">getLanguageList</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">// ['zh-CN', 'zh-TW', 'en']</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><h2 id="guiapi"><a href="#guiapi" aria-hidden="true" class="header-anchor">#</a> guiApi <span class="badge tip" style="vertical-align:top;" data-v-15b7b770>GUI VERSION 2.0.0+</span></h2> <p><strong>guiApi 仅在 electron 版本的 PicGo 里提供，详细信息可以参考 <a href="/PicGo-Core-Doc/zh/dev-guide/gui.html">GUI 插件开发一章</a>。</strong></p> <h3 id="guiapi-showinputbox-option"><a href="#guiapi-showinputbox-option" aria-hidden="true" class="header-anchor">#</a> guiApi.showInputBox([option])</h3> <p>调用之后打开一个输入弹窗，可以用于接受用户输入。</p> <ul><li>option: Object || <code>undefined</code></li> <li>return: 返回一个 Promise 对象，resolve 的值是用户输入的结果。</li></ul> <p>其中 option 是可选值，可以传入一个<code>{title, placeholder}</code>的对象，用于弹窗的标题和输入框的<code>placeholder</code>显示。</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">const</span> <span class="token function-variable function">guiMenu</span> <span class="token operator">=</span> <span class="token parameter">ctx</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token punctuation">[</span>
    <span class="token punctuation">{</span>
      label<span class="token punctuation">:</span> <span class="token string">'打开 InputBox'</span><span class="token punctuation">,</span>
      <span class="token keyword">async</span> <span class="token function">handle</span> <span class="token punctuation">(</span><span class="token parameter">ctx<span class="token punctuation">,</span> guiApi</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">const</span> value <span class="token operator">=</span> <span class="token keyword">await</span> guiApi<span class="token punctuation">.</span><span class="token function">showInputBox</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
          title<span class="token punctuation">:</span> <span class="token string">'打开对话框'</span><span class="token punctuation">,</span>
          placeholder<span class="token punctuation">:</span> <span class="token string">'请输入文件地址'</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>value<span class="token punctuation">)</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">]</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br></div></div><h3 id="guiapi-showfileexplorer-option"><a href="#guiapi-showfileexplorer-option" aria-hidden="true" class="header-anchor">#</a> guiApi.showFileExplorer([option])</h3> <p>调用之后打开一个文件浏览器，可以得到用户选择的文件（夹）路径。</p> <ul><li>option: Object || <code>undefined</code></li> <li>return: 返回一个 Promise 对象，resolve 的值是用户选择的文件路径数组。</li></ul> <p>其中 option 是可选值，可以传入一个合法的 electron 的 dialog 的 <a href="https://electronjs.org/docs/api/dialog#dialogshowopendialogbrowserwindow-options-callback" target="_blank" rel="noopener noreferrer">options 对象<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>，用于指定是否可多选，用于选择文件还是文件夹等等。</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">const</span> <span class="token function-variable function">guiMenu</span> <span class="token operator">=</span> <span class="token parameter">ctx</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token punctuation">[</span>
    <span class="token punctuation">{</span>
      label<span class="token punctuation">:</span> <span class="token string">'打开文件浏览器'</span><span class="token punctuation">,</span>
      <span class="token keyword">async</span> <span class="token function">handle</span> <span class="token punctuation">(</span><span class="token parameter">ctx<span class="token punctuation">,</span> guiApi</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">const</span> files <span class="token operator">=</span> <span class="token keyword">await</span> guiApi<span class="token punctuation">.</span><span class="token function">showFileExplorer</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
          properties<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token string">'openFile'</span><span class="token punctuation">,</span> <span class="token string">'multiSelections'</span><span class="token punctuation">]</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>files<span class="token punctuation">)</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">]</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br></div></div><h3 id="guiapi-upload-file"><a href="#guiapi-upload-file" aria-hidden="true" class="header-anchor">#</a> guiApi.upload([file])</h3> <p>调用之后使用 PicGo 底层来上传，可以实现自动更新相册图片、上传成功后自动将 URL 写入剪贴板。</p> <ul><li>file: Array || <code>undefined</code></li> <li>return: 返回一个 Promise 对象，resolve 的值是 PicGo 上传成功后的 output 值，是一个数组。所以推荐用<code>async await</code>获取。</li></ul> <div class="custom-block tip"><p class="custom-block-title">提示</p> <p>实际上如果通过上面的<code>showInputBox</code>获得输入项，或者<code>showFileExplorer</code>选中文件，再通过<code>upload</code>上传的话，也可以很好的达到上传的目的。
推荐还是书写 Uploader 或者 Transformer 等插件，来实现接管 PicGo 的上传流程。</p></div> <p>示例：</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">const</span> <span class="token function-variable function">guiMenu</span> <span class="token operator">=</span> <span class="token parameter">ctx</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token punctuation">[</span>
    <span class="token punctuation">{</span>
      label<span class="token punctuation">:</span> <span class="token string">'独立上传'</span><span class="token punctuation">,</span>
      <span class="token keyword">async</span> <span class="token function">handle</span> <span class="token punctuation">(</span><span class="token parameter">ctx<span class="token punctuation">,</span> guiApi</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">const</span> files <span class="token operator">=</span> <span class="token keyword">await</span> guiApi<span class="token punctuation">.</span><span class="token function">showFileExplorer</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
          properties<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token string">'openFile'</span><span class="token punctuation">,</span> <span class="token string">'multiSelections'</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span>
        guiApi<span class="token punctuation">.</span><span class="token function">upload</span><span class="token punctuation">(</span>files<span class="token punctuation">)</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">]</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br></div></div><h3 id="guiapi-shownotification-option"><a href="#guiapi-shownotification-option" aria-hidden="true" class="header-anchor">#</a> guiApi.showNotification(option) <span class="badge tip" style="vertical-align:top;" data-v-15b7b770>2.0.1+</span></h3> <p>调用之后弹出系统通知窗口。</p> <ul><li>option: Object || <code>undefined</code></li> <li>return: undefined（无返回值）</li></ul> <p>其中 option 是必选值，需要提供<code>{title, body}</code>用于通知窗口的显示。</p> <p><img src="https://pic.molunerfinn.com/picgo/docs/5c3db88042a0f.png" alt=""></p> <p>示例：</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">const</span> <span class="token function-variable function">guiMenu</span> <span class="token operator">=</span> <span class="token parameter">ctx</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token punctuation">[</span>
    <span class="token punctuation">{</span>
      label<span class="token punctuation">:</span> <span class="token string">'显示通知'</span><span class="token punctuation">,</span>
      <span class="token keyword">async</span> <span class="token function">handle</span> <span class="token punctuation">(</span><span class="token parameter">ctx<span class="token punctuation">,</span> guiApi</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        guiApi<span class="token punctuation">.</span><span class="token function">showNotification</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
          title<span class="token punctuation">:</span> <span class="token string">'提示'</span><span class="token punctuation">,</span>
          body<span class="token punctuation">:</span> <span class="token string">'本提示来自插件'</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">]</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br></div></div><h3 id="guiapi-showmessagebox-option"><a href="#guiapi-showmessagebox-option" aria-hidden="true" class="header-anchor">#</a> guiApi.showMessageBox([option]) <span class="badge tip" style="vertical-align:top;" data-v-15b7b770>2.1.0+</span></h3> <p>调用之后弹出系统的对话框窗口。</p> <ul><li>option: Object || <code>{title: '', message: '', type: 'info', buttons: ['Yes', 'No']}</code></li> <li>return: Object -&gt; <code>{result, checkboxChecked}</code></li></ul> <p><img src="https://pic.molunerfinn.com/picgo/docs/20190611110904.png" alt=""></p> <p>其中，option 的完整参数可以参考 Electron 的 <a href="https://electronjs.org/docs/api/dialog#dialogshowmessageboxbrowserwindow-options-callback" target="_blank" rel="noopener noreferrer">dialog.showMessageBox<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>。返回的值里，<code>result</code>为你指定的 buttons 的 index 值。比如上图如果我点了<code>是 (Y)</code>, 那么我会收到如下返回值：</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token punctuation">{</span>
  result<span class="token punctuation">:</span> <span class="token number">0</span><span class="token punctuation">,</span>
  checkboxChecked<span class="token punctuation">:</span> <span class="token boolean">false</span> <span class="token comment">// 如果你在 options 里指定了 checkboxLabel 则会出现一个 checkbox，如果不提供，默认返回 false</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><p>示例：</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">const</span> <span class="token function-variable function">guiMenu</span> <span class="token operator">=</span> <span class="token parameter">ctx</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token punctuation">[</span>
    <span class="token punctuation">{</span>
      label<span class="token punctuation">:</span> <span class="token string">'显示 MessageBox'</span><span class="token punctuation">,</span>
      <span class="token keyword">async</span> <span class="token function">handle</span> <span class="token punctuation">(</span><span class="token parameter">ctx<span class="token punctuation">,</span> guiApi</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">const</span> result <span class="token operator">=</span> <span class="token keyword">await</span> guiApi<span class="token punctuation">.</span><span class="token function">showMessageBox</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
          title<span class="token punctuation">:</span> <span class="token string">'这是 title'</span><span class="token punctuation">,</span>
          message<span class="token punctuation">:</span> <span class="token string">'这是 message'</span><span class="token punctuation">,</span>
          type<span class="token punctuation">:</span> <span class="token string">'info'</span><span class="token punctuation">,</span>
          buttons<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token string">'Yes'</span><span class="token punctuation">,</span> <span class="token string">'No'</span><span class="token punctuation">]</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>result<span class="token punctuation">)</span> <span class="token comment">// { result: 0, checkboxChecked: false }</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">]</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br></div></div><h3 id="guiapi-gallerydb"><a href="#guiapi-gallerydb" aria-hidden="true" class="header-anchor">#</a> guiApi.galleryDB <span class="badge tip" style="vertical-align:top;" data-v-15b7b770>GUI VERSION 2.3.0+</span></h3> <p>从 PicGo GUI 2.3.0 开始，相册数据使用 <code>galleryDB</code> 操作，不再使用 config 里的 <code>uploaded</code> 字段。</p> <p>galleryDB的使用可以参考 <a href="https://github.com/PicGo/store#get-getfilter-ifilter" target="_blank" rel="noopener noreferrer">PicGo/store<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> 提供的api，以此为准。下文不一定更新及时。</p> <h4 id="gallerydb-get-filter"><a href="#gallerydb-get-filter" aria-hidden="true" class="header-anchor">#</a> galleryDB.get(filter?)</h4> <ul><li>filter: undefined || Object -&gt; <a href="https://github.com/PicGo/store/blob/dev/src/types/index.ts" target="_blank" rel="noopener noreferrer">IFilter<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li>return: Promise&lt;<a href="https://github.com/PicGo/PicGo-Core/blob/f133d57562c413b0b6f9a9ca9a93bf19c1768f1f/src/types/index.d.ts#L169-L178" target="_blank" rel="noopener noreferrer">IImgInfo[]<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>&gt;</li></ul> <p>获取相册列表。可以提供filter字段用于过滤，如果不提供则默认获取全部列表。示例：</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">const</span> <span class="token function-variable function">guiMenu</span> <span class="token operator">=</span> <span class="token parameter">ctx</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token punctuation">[</span>
    <span class="token punctuation">{</span>
      label<span class="token punctuation">:</span> <span class="token string">'获取相册数据'</span><span class="token punctuation">,</span>
      <span class="token keyword">async</span> <span class="token function">handle</span> <span class="token punctuation">(</span><span class="token parameter">ctx<span class="token punctuation">,</span> guiApi</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">const</span> result <span class="token operator">=</span> <span class="token keyword">await</span> guiApi<span class="token punctuation">.</span>galleryDB<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
          orderBy<span class="token punctuation">:</span> <span class="token string">'asc'</span><span class="token punctuation">,</span> <span class="token comment">// 升序</span>
          limit<span class="token punctuation">:</span> <span class="token number">10</span><span class="token punctuation">,</span> <span class="token comment">// 取10个</span>
          offset<span class="token punctuation">:</span> <span class="token number">5</span> <span class="token comment">// 从index 5之后开始取（slice(5))</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>result<span class="token punctuation">)</span> <span class="token comment">// [{...}, {...}, {...}, ...]</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">]</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br></div></div><h4 id="gallerydb-insert-value"><a href="#gallerydb-insert-value" aria-hidden="true" class="header-anchor">#</a> galleryDB.insert(value)</h4> <ul><li>value: Object -&gt; <a href="https://github.com/PicGo/PicGo-Core/blob/f133d57562c413b0b6f9a9ca9a93bf19c1768f1f/src/types/index.d.ts#L169-L178" target="_blank" rel="noopener noreferrer">IImgInfo<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li>return: Promise&lt;<a href="https://github.com/PicGo/store/blob/dev/src/types/index.ts" target="_blank" rel="noopener noreferrer">IResult<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>&gt;</li></ul> <p>往相册中插入数据。注意插入的数据一定要是符合要求的 output 中的格式（参考 <a href="/PicGo-Core-Doc/zh/dev-guide/cli.html#transformer">transformer 一章</a>，否则无法展示在相册中。</p> <h4 id="gallerydb-insertmany-value"><a href="#gallerydb-insertmany-value" aria-hidden="true" class="header-anchor">#</a> galleryDB.insertMany([...value])</h4> <ul><li>input: Array -&gt; <a href="https://github.com/PicGo/PicGo-Core/blob/f133d57562c413b0b6f9a9ca9a93bf19c1768f1f/src/types/index.d.ts#L169-L178" target="_blank" rel="noopener noreferrer">IImgInfo[]<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li>return: Promise&lt;<a href="https://github.com/PicGo/store/blob/dev/src/types/index.ts" target="_blank" rel="noopener noreferrer">IResult[]<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>&gt;</li></ul> <p>往相册中批量插入数据。注意插入的数据一定要是符合要求的 output 数组格式（参考 <a href="/PicGo-Core-Doc/zh/dev-guide/cli.html#transformer">transformer 一章</a>，否则无法展示在相册中。</p> <h4 id="gallerydb-updatebyid-id-value"><a href="#gallerydb-updatebyid-id-value" aria-hidden="true" class="header-anchor">#</a> galleryDB.updateById(id, value)</h4> <ul><li>id: string 相册中某张图片的id</li> <li>value: <a href="https://github.com/PicGo/PicGo-Core/blob/f133d57562c413b0b6f9a9ca9a93bf19c1768f1f/src/types/index.d.ts#L169-L178" target="_blank" rel="noopener noreferrer">IImgInfo<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li>return: Promise&lt;boolean&gt;</li></ul> <p>根据相册数据中的id更新某张图片的信息。返回boolean。如果更新成功返回true，反之返回false。</p> <h4 id="gallerydb-getbyid-id"><a href="#gallerydb-getbyid-id" aria-hidden="true" class="header-anchor">#</a> galleryDB.getById(id)</h4> <ul><li>id: string 相册中某张图片的id</li> <li>return: Promise&lt;<a href="https://github.com/PicGo/PicGo-Core/blob/f133d57562c413b0b6f9a9ca9a93bf19c1768f1f/src/types/index.d.ts#L169-L178" target="_blank" rel="noopener noreferrer">IImgInfo<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>&gt;</li></ul> <p>根据id获取某张图片的信息。</p> <h4 id="gallerydb-removebyid-id"><a href="#gallerydb-removebyid-id" aria-hidden="true" class="header-anchor">#</a> galleryDB.removeById(id)</h4> <ul><li>id: string 相册中某张图片的id</li> <li>return: void</li></ul> <p>根据id删除某张图片的信息。无返回值。</p> <p><strong>注意，删除图片是敏感操作，GUI版本会提示用户是否允许删除。</strong></p> <h4 id="gallerydb-overwrite-value"><a href="#gallerydb-overwrite-value" aria-hidden="true" class="header-anchor">#</a> galleryDB.overwrite(value)</h4> <ul><li>value: <a href="https://github.com/PicGo/PicGo-Core/blob/f133d57562c413b0b6f9a9ca9a93bf19c1768f1f/src/types/index.d.ts#L169-L178" target="_blank" rel="noopener noreferrer">IImgInfo[]<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li>return: Promise&lt;<a href="https://github.com/PicGo/store/blob/dev/src/types/index.ts" target="_blank" rel="noopener noreferrer">IResult[]<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>&gt;</li></ul> <p>覆盖相册中的数据。 <strong>覆盖前会清空原有数据。</strong></p> <p><strong>注意，覆盖图片列表是敏感操作，GUI版本会提示用户是否允许覆盖。</strong></p></div> <footer class="page-edit"><div class="edit-link"><a href="https://github.com/PicGo/PicGo-Core-Doc/edit/master/docs/zh/api/README.md" target="_blank" rel="noopener noreferrer">Edit this page</a> <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></div> <!----></footer> <!----> </main></div><div class="global-ui"></div></div>
    <script src="/PicGo-Core-Doc/assets/js/app.7b024f77.js" defer></script><script src="/PicGo-Core-Doc/assets/js/2.ff97eeb7.js" defer></script><script src="/PicGo-Core-Doc/assets/js/9.252a3bf2.js" defer></script><script src="/PicGo-Core-Doc/assets/js/3.188656f0.js" defer></script>
  </body>
</html>
